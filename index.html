
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special Wishes For You</title>
    <style>
        /* --- CORE CSS --- */
        body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle, #2e0000, #000000);
            font-family: 'Arial', sans-serif;
            color: #ffcc00;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        /* Fireworks Canvas - UPDATED TO FRONT */
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999; /* Moved to Front */
            pointer-events: none; /* Clicks will pass through to buttons */
        }

        /* Ad Container Style */
        .ad-container {
            margin: 10px auto;
            text-align: center;
            z-index: 100;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 5px;
        }

        .container {
            position: relative;
            width: 92%;
            max-width: 480px;
            background: rgba(50, 0, 0, 0.8);
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 25px rgba(255, 140, 0, 0.6);
            backdrop-filter: blur(4px);
            margin: 10px 0;
            z-index: 10; /* Lower than canvas */
        }

        h1 {
            font-size: 2rem;
            margin: 5px 0;
            color: gold;
            text-shadow: 2px 2px 4px red;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Greeting Text Animation */
        #wishingText {
            display: none;
            margin-bottom: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 0 10px #ff0000, 0 0 20px gold;
        }

        .image-box {
            width: 100%;
            height: 280px;
            border: 2px dashed #ffcc00;
            border-radius: 10px;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .image-box img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        /* --- BUTTONS --- */
        .btn-next {
            background: #ff4500;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 15px;
        }

        .input-area {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid gold;
        }

        input[type="text"] {
            padding: 12px;
            width: 80%;
            border-radius: 30px;
            border: 2px solid #25D366;
            text-align: center;
            font-size: 16px;
            outline: none;
            margin-bottom: 15px;
        }

        /* WHATSAPP SHARE BUTTON STYLE */
        .wa-btn {
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            padding: 12px 20px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid white;
            border-radius: 50px;
            cursor: pointer;
            width: 90%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: pulse 2s infinite;
        }

        .wa-btn:hover {
            transform: scale(1.05);
        }

        .wa-icon {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .blog-btn {
            background: #007bff;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 15px;
            font-size: 14px;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }

        /* Fallback Share Section */
        #manualShare {
            display: none;
            margin-top: 15px;
            background: #222;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <!-- Fireworks Background (Now on Front) -->
    <canvas id="fireworksCanvas"></canvas>

    <!-- ADSTERRA AD UNIT (TOP) -->
    <div class="ad-container">
        <script type="text/javascript">
            atOptions = {
                'key' : '5151d99dda1d9483bde7073716b4e6c7',
                'format' : 'iframe',
                'height' : 60,
                'width' : 468,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/5151d99dda1d9483bde7073716b4e6c7/invoke.js"></script>
    </div>

    <div class="container">
        <div style="font-size: 20px;">‚ú® üéâ ‚ú®</div>

        <!-- Greeting Area -->
        <div id="wishingText">
            <span style="color: #ffd700;">Happy Wishes From</span><br>
            <span id="displayName" style="color: #fff; font-size: 2rem;"></span>
        </div>
        
        <h1 id="defaultHeader">Best Wishes For You</h1>

        <!-- Image Area -->
        <div class="image-box">
            <img id="mainImage" src="vil.gif" alt="Festival Animation">
        </div>

        <button class="btn-next" onclick="changeImage()">Next Image ‚è©</button>

        <!-- Input & WhatsApp Button Area -->
        <div class="input-area">
            <p style="color: white; margin-bottom: 5px;">üëá ‡§Ö‡§™‡§®‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç üëá</p>
            <input type="text" id="nameInput" placeholder="Enter Your Name Here...">
            <br>
            
            <!-- WHATSAPP BUTTON -->
            <button class="wa-btn" onclick="shareOnWhatsApp()">
                <!-- SVG Icon for WhatsApp -->
                <svg class="wa-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.9 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
                Share on WhatsApp
            </button>
        </div>

        <!-- Manual Share (Hidden Backup) -->
        <div id="manualShare">
            <p style="font-size:12px; color:#ccc;">Copy Link:</p>
            <input type="text" id="generatedUrl" readonly style="width:70%; background:#000; color:#fff; border:1px solid #555;">
        </div>

        <!-- Extra Link to Blog -->
        <a href="https://vilayash2014.blogspot.com/2025/05/happy-buddha-purnima.html" class="blog-btn" target="_blank">See More Wishes & Images ‚û°Ô∏è</a>

    </div>

    <!-- ADSTERRA AD UNIT (BOTTOM) -->
    <div class="ad-container">
        <script type="text/javascript">
            atOptions = {
                'key' : '5151d99dda1d9483bde7073716b4e6c7',
                'format' : 'iframe',
                'height' : 60,
                'width' : 468,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/5151d99dda1d9483bde7073716b4e6c7/invoke.js"></script>
    </div>

    <script>
        // CONFIG
        const images = ['vil.gif', 'vil1.gif', 'vil2.gif', 'vil3.gif', 'vil4.gif'];
        let currentIndex = 0;

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const senderName = urlParams.get('n');

            if (senderName) {
                const decodedName = decodeURIComponent(senderName);
                document.getElementById('defaultHeader').style.display = 'none';
                document.getElementById('wishingText').style.display = 'block';
                document.getElementById('displayName').innerText = decodedName;
                document.getElementById('mainImage').src = images[0];
                
                // Start HEAVY Fireworks
                startHeavyFireworks();
            }
        };

        function changeImage() {
            currentIndex++;
            if (currentIndex >= images.length) currentIndex = 0;
            document.getElementById('mainImage').src = images[currentIndex];
        }

        function shareOnWhatsApp() {
            const name = document.getElementById('nameInput').value.trim();
            if (name === "") { alert("Please enter your name first!"); return; }

            const baseUrl = window.location.href.split('?')[0];
            const newUrl = baseUrl + "?n=" + encodeURIComponent(name);

            // Show manual link for backup
            document.getElementById('manualShare').style.display = 'block';
            document.getElementById('generatedUrl').value = newUrl;

            // WhatsApp Logic
            const msg = `‚ú® *Special Surprise for You* ‚ú®\n\n${name} sent you a magical wish! üéÅ\nClick the blue link below üëá\n\n${newUrl}`;
            
            // Open WhatsApp
            window.location.href = "whatsapp://send?text=" + encodeURIComponent(msg);
        }

        // --- HEAVY FIREWORKS LOGIC (Visible on Front) ---
        function startHeavyFireworks() {
            const canvas = document.getElementById("fireworksCanvas");
            const ctx = canvas.getContext("2d");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            let particles = [];

            function Particle(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                // Faster velocity
                this.velocity = { x: (Math.random() - 0.5) * 12, y: (Math.random() - 0.5) * 12 };
                this.alpha = 1; 
                this.friction = 0.96;
            }

            Particle.prototype.draw = function() {
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2, false); // Bigger particles
                ctx.fillStyle = this.color;
                ctx.fill();
            }

            Particle.prototype.update = function() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.x += this.velocity.x;
                this.y += this.velocity.y + 0.1; // Gravity
                this.alpha -= 0.015; // Fade out
                this.draw();
            }

            function createExplosion(x, y) {
                const colors = ['#ff0000', '#ffd700', '#00ff00', '#00ffff', '#ff00ff', '#ffffff'];
                // Heavy explosion
                for (let i = 0; i < 100; i++) {
                    particles.push(new Particle(x, y, colors[Math.floor(Math.random() * colors.length)]));
                }
            }

            function animate() {
                requestAnimationFrame(animate);
                
                // IMPORTANT: This technique fades trails to TRANSPARENT, not Black.
                // This ensures the website background remains visible underneath.
                ctx.globalCompositeOperation = 'destination-out';
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; 
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.globalCompositeOperation = 'source-over';

                particles.forEach((p, i) => {
                    if (p.alpha > 0) p.update();
                    else particles.splice(i, 1);
                });

                // Frequent explosions
                if (Math.random() < 0.15) {
                    createExplosion(Math.random() * canvas.width, Math.random() * canvas.height * 0.6);
                }
            }
            animate();
        }
        
        window.addEventListener('resize', () => {
            const c = document.getElementById("fireworksCanvas");
            c.width = window.innerWidth;
            c.height = window.innerHeight;
        });
    </script>
</body>
</html>
